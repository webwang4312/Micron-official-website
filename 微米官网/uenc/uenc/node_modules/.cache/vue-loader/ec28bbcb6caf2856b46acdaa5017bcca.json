{"remainingRequest":"D:\\weimi\\Micron-official-website\\微米官网\\uenc\\uenc\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\weimi\\Micron-official-website\\微米官网\\uenc\\uenc\\src\\views\\m\\Proposal.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\weimi\\Micron-official-website\\微米官网\\uenc\\uenc\\src\\views\\m\\Proposal.vue","mtime":1623717594326},{"path":"D:\\weimi\\Micron-official-website\\微米官网\\uenc\\uenc\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1623717554021},{"path":"D:\\weimi\\Micron-official-website\\微米官网\\uenc\\uenc\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1623717589083},{"path":"D:\\weimi\\Micron-official-website\\微米官网\\uenc\\uenc\\node_modules\\babel-loader\\lib\\index.js","mtime":1623717553223},{"path":"D:\\weimi\\Micron-official-website\\微米官网\\uenc\\uenc\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1623717554021},{"path":"D:\\weimi\\Micron-official-website\\微米官网\\uenc\\uenc\\node_modules\\vue-loader\\lib\\index.js","mtime":1623717591153}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { GetProposalList, GetDictList, CheckUsersStatus } from \"@/assets/server/api.js\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      searchForm: {\r\n        title: \"\",\r\n        status: \"\",\r\n        pageNo: 1,\r\n        pageSize: 10\r\n      },\r\n      statusList: [],\r\n      currentPage: 1,\r\n      proposalList: [],\r\n      total: 0\r\n    };\r\n  },\r\n  mounted() {\r\n    this.getProposalList();\r\n    this.getDictList();\r\n    console.log(this, \"this\");\r\n  },\r\n  methods: {\r\n    async goPublish() {\r\n      let loginName = localStorage.getItem(\"username\");\r\n      if (loginName) {\r\n        const data = await CheckUsersStatus(loginName);\r\n        if (data.code === 0) {\r\n          if (data.data === \"0\") {\r\n            this.$router.push({\r\n              path: \"/m/community/Proposal/Add\"\r\n            });\r\n          } else {\r\n            this.$notify({ type: \"error\", message: data.msg });\r\n          }\r\n        } else {\r\n          this.$notify({ type: \"error\", message: data.msg });\r\n        }\r\n      } else {\r\n        this.$notify({\r\n          type: \"error\",\r\n          message:\r\n            this.$t(\"index.switch\") === \"cn\"\r\n              ? \"请先登录您的账号信息\"\r\n              : \"log in your information first\"\r\n        });\r\n      }\r\n    },\r\n    more() {\r\n      this.searchForm.pageNo++;\r\n      this.getProposalList();\r\n    },\r\n    async getProposalList() {\r\n      const dataList = await GetProposalList(this.searchForm);\r\n      if (dataList.code === 0) {\r\n        if (!dataList.rows.length) this.$notify({\r\n          type: \"error\",\r\n          message: this.$t(\"index.switch\") === \"cn\" ? \"暂无内容\" : \"No content\"\r\n        });\r\n        dataList.rows.forEach(item => {\r\n          item.summary = item.summary.replace(/\\n/g, \"<br>\");\r\n        });\r\n        this.proposalList = this.proposalList.concat(dataList.rows);\r\n        this.total = dataList.total;\r\n      } else {\r\n        this.$notify({ type: \"error\", message: dataList.msg });\r\n      }\r\n    },\r\n    async getDictList() {\r\n      const dataList = await GetDictList({ dictType: \"sys_proposal_status\" });\r\n      if (dataList.code === 0) {\r\n        this.statusList = dataList.rows;\r\n      } else {\r\n        this.$notify({ type: \"error\", message: dataList.msg });\r\n      }\r\n    },\r\n    search() {\r\n      this.proposalList = [];\r\n      this.getProposalList();\r\n    },\r\n    getStatus(type) {\r\n      let label = \"无状态\";\r\n      for (const key of this.statusList) {\r\n        if (key.dictValue == type) {\r\n          label = key.dictLabel;\r\n          break;\r\n        }\r\n      }\r\n      return label;\r\n    },\r\n    details(id) {\r\n      this.$router.push({\r\n        path: \"/m/community/Proposal/Details\",\r\n        query: { id: id, type: \"Proposal\" }\r\n      });\r\n    },\r\n    handleSizeChange(val) {\r\n      this.searchForm.pageSize = val;\r\n      this.getProposalList();\r\n      console.log(`每页 ${val} 条`);\r\n    },\r\n    handleCurrentChange(val) {\r\n      console.log(`当前页: ${val}`);\r\n    }\r\n  }\r\n};\r\n",{"version":3,"sources":["Proposal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Proposal.vue","sourceRoot":"src/views/m","sourcesContent":["<!--\r\n * @Author: yaoyuting\r\n * @Date: 2021-04-18 18:04:59\r\n * @LastEditors: yaoyuting\r\n * @LastEditTime: 2021-05-20 07:36:43\r\n * @Descripttion: \r\n-->\r\n<template>\r\n  <div class=\"Proposal\">\r\n    <div class=\"banner\">\r\n      <div class=\"sub_title\">{{ $t(\"Proposal.Welcome\") }}</div>\r\n      <div class=\"search\">\r\n        <div class=\"tpp\">\r\n          <input\r\n            type=\"text\"\r\n            v-model=\"searchForm.title\"\r\n            class=\"el-input__inner\"\r\n            :placeholder=\"$t('Proposal.title')\"\r\n          />\r\n          <el-select\r\n            v-model=\"searchForm.status\"\r\n            :placeholder=\"$t('Proposal.state')\"\r\n            class=\"select_style\"\r\n            clearable\r\n          >\r\n            <el-option\r\n              v-for=\"item in statusList\"\r\n              :key=\"item.dictValue\"\r\n              :label=\"item.dictLabel\"\r\n              :value=\"item.dictValue\"\r\n            ></el-option>\r\n          </el-select>\r\n        </div>\r\n        <div class=\"bottom\">\r\n          <el-button type=\"primary\" @click=\"search\">{{ $t(\"Proposal.Search\") }}</el-button>\r\n          <el-button type=\"primary\" @click=\"goPublish\"\r\n            ><i class=\"el-icon-plus\"></i> {{ $t(\"Proposal.publish\") }}</el-button\r\n          >\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"detalis_bg\" v-if=\"proposalList.length > 0\">\r\n      <template v-for=\"list in proposalList\">\r\n        <div class=\"details\" @click=\"details(list.id)\" :key=\"list.id\">\r\n          <div class=\"top\">\r\n            <div class=\"num\">{{ list.id }}</div>\r\n            <div class=\"right\">\r\n              <div class=\"title\">{{ list.title }}</div>\r\n              <div class=\"date\">{{ list.createTime }}</div>\r\n            </div>\r\n          </div>\r\n          <div class=\"content\">\r\n            <div class=\"bottom\">\r\n              <div class=\"people\">{{ $t(\"Proposal.Proposer\") }}:{{ list.name }}</div>\r\n              <div class=\"status\">{{ $t(\"Proposal.status\") }}：{{ getStatus(list.status) }}</div>\r\n            </div>\r\n            <div class=\"text\" v-html=\"list.summary\">{{ list.summary }}</div>\r\n          </div>\r\n        </div>\r\n      </template>\r\n      <div class=\"more\">\r\n        <span v-if=\"proposalList.length < total\" @click=\"more\">\r\n          {{ $t(\"index.switch\") === \"cn\" ? \"浏览更多\" : \"more\" }}\r\n        </span>\r\n      </div>\r\n    </div>\r\n    <div class=\"all_center\" v-else>\r\n      {{ $t(\"index.switch\") === \"cn\" ? \"暂无数据\" : \"Empty data\" }}\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { GetProposalList, GetDictList, CheckUsersStatus } from \"@/assets/server/api.js\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      searchForm: {\r\n        title: \"\",\r\n        status: \"\",\r\n        pageNo: 1,\r\n        pageSize: 10\r\n      },\r\n      statusList: [],\r\n      currentPage: 1,\r\n      proposalList: [],\r\n      total: 0\r\n    };\r\n  },\r\n  mounted() {\r\n    this.getProposalList();\r\n    this.getDictList();\r\n    console.log(this, \"this\");\r\n  },\r\n  methods: {\r\n    async goPublish() {\r\n      let loginName = localStorage.getItem(\"username\");\r\n      if (loginName) {\r\n        const data = await CheckUsersStatus(loginName);\r\n        if (data.code === 0) {\r\n          if (data.data === \"0\") {\r\n            this.$router.push({\r\n              path: \"/m/community/Proposal/Add\"\r\n            });\r\n          } else {\r\n            this.$notify({ type: \"error\", message: data.msg });\r\n          }\r\n        } else {\r\n          this.$notify({ type: \"error\", message: data.msg });\r\n        }\r\n      } else {\r\n        this.$notify({\r\n          type: \"error\",\r\n          message:\r\n            this.$t(\"index.switch\") === \"cn\"\r\n              ? \"请先登录您的账号信息\"\r\n              : \"log in your information first\"\r\n        });\r\n      }\r\n    },\r\n    more() {\r\n      this.searchForm.pageNo++;\r\n      this.getProposalList();\r\n    },\r\n    async getProposalList() {\r\n      const dataList = await GetProposalList(this.searchForm);\r\n      if (dataList.code === 0) {\r\n        if (!dataList.rows.length) this.$notify({\r\n          type: \"error\",\r\n          message: this.$t(\"index.switch\") === \"cn\" ? \"暂无内容\" : \"No content\"\r\n        });\r\n        dataList.rows.forEach(item => {\r\n          item.summary = item.summary.replace(/\\n/g, \"<br>\");\r\n        });\r\n        this.proposalList = this.proposalList.concat(dataList.rows);\r\n        this.total = dataList.total;\r\n      } else {\r\n        this.$notify({ type: \"error\", message: dataList.msg });\r\n      }\r\n    },\r\n    async getDictList() {\r\n      const dataList = await GetDictList({ dictType: \"sys_proposal_status\" });\r\n      if (dataList.code === 0) {\r\n        this.statusList = dataList.rows;\r\n      } else {\r\n        this.$notify({ type: \"error\", message: dataList.msg });\r\n      }\r\n    },\r\n    search() {\r\n      this.proposalList = [];\r\n      this.getProposalList();\r\n    },\r\n    getStatus(type) {\r\n      let label = \"无状态\";\r\n      for (const key of this.statusList) {\r\n        if (key.dictValue == type) {\r\n          label = key.dictLabel;\r\n          break;\r\n        }\r\n      }\r\n      return label;\r\n    },\r\n    details(id) {\r\n      this.$router.push({\r\n        path: \"/m/community/Proposal/Details\",\r\n        query: { id: id, type: \"Proposal\" }\r\n      });\r\n    },\r\n    handleSizeChange(val) {\r\n      this.searchForm.pageSize = val;\r\n      this.getProposalList();\r\n      console.log(`每页 ${val} 条`);\r\n    },\r\n    handleCurrentChange(val) {\r\n      console.log(`当前页: ${val}`);\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.Proposal {\r\n  min-height: 1400px;\r\n  .all_center {\r\n    margin-top: 300px;\r\n  }\r\n  .banner {\r\n    height: 372 * 2px;\r\n    background-image: url(\"../../assets/imagesm/indba2.png\");\r\n    background-size: cover;\r\n    background-position: center center;\r\n    padding: 0 32px;\r\n    .sub_title {\r\n      font-size: 44px;\r\n      font-family: PingFang-SC-Heavy, PingFang-SC;\r\n      font-weight: 800;\r\n      color: #ffffff;\r\n      line-height: 60px;\r\n      margin-bottom: 28px;\r\n      padding-top: 148 * 2px;\r\n    }\r\n    .search {\r\n      .tpp {\r\n        margin-bottom: 54px;\r\n        .el-input__inner {\r\n          line-height: 64px;\r\n          width: 343 * 2px;\r\n          height: 38 * 2px;\r\n          background: #ffffff;\r\n          border-radius: 8px;\r\n          font-size: 24px;\r\n          font-family: PingFangSC-Regular, PingFang SC;\r\n          font-weight: 400;\r\n          color: #999999;\r\n          line-height: 34px;\r\n          margin-bottom: 30px;\r\n        }\r\n        .select_style {\r\n          width: 126 * 2px;\r\n          height: 76px;\r\n          background: #ffffff;\r\n          border-radius: 8px;\r\n        }\r\n      }\r\n      .bottom {\r\n        text-align: center;\r\n        margin-bottom: 120px;\r\n        display: flex;\r\n        justify-content: space-around;\r\n        .el-button {\r\n          padding: 0;\r\n          margin: 0;\r\n          width: 109 * 2px;\r\n          height: 64px;\r\n          border-radius: 8px;\r\n          border: 4px solid #ffffff;\r\n          background-color: rgba(0, 0, 0, 0);\r\n          font-size: 28px !important;\r\n          font-family: PingFangSC-Medium, PingFang SC;\r\n          font-weight: 500;\r\n          color: #ffffff;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .detalis_bg {\r\n    background-image: url(\"../../assets/imagesm/ta/bg.png\");\r\n    // background-size: cover;\r\n    // background-position: center center;\r\n    background-size: 750px;\r\n  }\r\n  .details {\r\n    cursor: pointer;\r\n    // padding-bottom: 86px;\r\n    .top {\r\n      display: flex;\r\n      justify-content: flex-start;\r\n      height: 79 * 2px;\r\n      padding-top: 52px;\r\n      .num {\r\n        width: 72px;\r\n        height: 72px;\r\n        line-height: 72px;\r\n        text-align: center;\r\n        background: #6624fa;\r\n        border-radius: 12px;\r\n        margin-left: 30px;\r\n        margin-right: 30px;\r\n        font-size: 24px;\r\n        font-family: PingFangSC-Medium, PingFang SC;\r\n        font-weight: 500;\r\n        color: #ffffff;\r\n      }\r\n      .title {\r\n        font-size: 28px;\r\n        font-family: PingFangSC, PingFangSC-Medium;\r\n        font-weight: 500;\r\n        text-align: left;\r\n        color: #333333;\r\n        line-height: 40px;\r\n        margin-bottom: 8px;\r\n        text-overflow: ellipsis;\r\n        overflow: hidden;\r\n        white-space: nowrap;\r\n        max-width: 500px;\r\n      }\r\n      .date {\r\n        font-size: 24px;\r\n        font-family: PingFangSC, PingFangSC-Regular;\r\n        font-weight: 400;\r\n        text-align: left;\r\n        color: #666666;\r\n        line-height: 34px;\r\n      }\r\n    }\r\n    .content {\r\n      margin-top: 24px;\r\n      padding: 30px;\r\n      background: #f6f6f6;\r\n      .people {\r\n        text-overflow: ellipsis;\r\n        overflow: hidden;\r\n        white-space: nowrap;\r\n        width: calc(100% - 200px);\r\n        font-weight: 500;\r\n        font-size: 24px;\r\n        font-family: PingFangSC, PingFangSC-Regular;\r\n        text-align: left;\r\n        color: #666;\r\n        line-height: 34px;\r\n      }\r\n      .status {\r\n        width: 200px;\r\n        text-align: right;\r\n        font-size: 26px;\r\n        font-family: PingFangSC-Medium, PingFang SC;\r\n        font-weight: 500;\r\n        color: #484747;\r\n        line-height: 36px;\r\n      }\r\n      .bottom {\r\n        display: flex;\r\n        justify-content: space-between;\r\n      }\r\n      .text {\r\n        max-height: 110px;\r\n        margin-top: 20px;\r\n        word-break: break-all;\r\n        overflow: hidden;\r\n        display: -webkit-box;\r\n        -webkit-box-orient: vertical;\r\n        -webkit-line-clamp: 3;\r\n        font-size: 24px;\r\n        font-family: PingFangSC-Regular, PingFang SC;\r\n        font-weight: 400;\r\n        color: #656565;\r\n        line-height: 40px;\r\n      }\r\n    }\r\n  }\r\n  .more {\r\n    text-align: center;\r\n    width: 100%;\r\n    padding: 40px 0 40px;\r\n    font-size: 28px;\r\n    color: #5432F4;\r\n    cursor: pointer;\r\n  }\r\n}\r\n</style>\r\n\r\n<style lang=\"less\">\r\n.banner {\r\n  .el-input {\r\n    position: static;\r\n  }\r\n  .el-select {\r\n    position: static;\r\n  }\r\n  .el-input__suffix {\r\n    position: static;\r\n    margin-left: -60px;\r\n  }\r\n  .el-input__inner {\r\n    font-size: 24px !important;\r\n    font-family: PingFangSC-Regular, PingFang SC;\r\n    font-weight: 400;\r\n    color: #999999;\r\n    line-height: 34px;\r\n  }\r\n}\r\n</style>\r\n"]}]}